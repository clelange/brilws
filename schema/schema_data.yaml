#
# Schema for data
#

##### Map tables #####

HLTCONFIGMAP:
   columns:
    - hltconfigid: unsigned int
    - hltkey: string
   pk: [hltconfigid]

DATATABLEMAP: #static map , data table registry
   columns:
    - datasourceid: unsigned short
    - datasource: string 
    - suffix: string
    - datasourcename: string 
    - minrun: unsigned int
    - maxrun: unsigned int
   pk: [datasourceid]

TRGBITMAP:
   columns:    #static map
    - bitnameid: unsigned short
    - bitid: unsigned short
    - bitname: string              #name used in l1seed expression
    - isalgo: bool
   pk: [bitnameid]

TRGHLTSEEDMAP:
   columns:
    - hltpathid: unsigned int
    - hltconfigid: unsigned int
    - l1seedid: unsigned int
   pk: [hltpathid,hltconfigid,l1seedid]

L1SEEDMAP:
   columns:
    - l1seedid: unsigned int
    - l1seed: string
   pk: [l1seedid]
    
HLTPATHMAP:    #static map
   columns:
    - hltpathid: unsigned int
    - hltpathname: string
   pk: [hltpathid]

DATASETMAP:   #static map
   columns:
    - datasetid: unsigned int
    - datasetname: string
   pk: [datasetid]
   
BEAMSTATUSMAP: #static map
   columns:
    - beamstatusid: unsigned short
    - beamstatus: string
   pk: [beamstatusid]

AMODETAGMAP:
   columns:
    - amodetagid: unsigned short
    - amodetag: string
   pk: [amodetagid]

HLTSTREAMDATASET:  #static map , hlt stream, dataset, path map           
   columns:
    - hltpathid: unsigned int
    - streamid: unsigned int
    - streamlabel: string
    - datasetid: unsigned int
   pk: [hltpathid,streamid,datasetid]

##### Data tables #####

DATATAGS:          
   columns:
    - datatagid: long long 
    - datatagname: string
    - creationutc: string
    - comment: string
   pk: [datatagid]
   unique: [datatagname]
  
TIMEINDEX:        #per ls
   columns:
    - fillnum: unsigned int
    - runnum: unsigned int
    - lsnum: unsigned int
    - timestampsec: unsigned int
    - timestampmsec: unsigned int
    - timestampstr: string       #just for display. do not query
    - weekofyear: unsigned short
    - dayofyear: unsigned short
    - dayofweek: unsigned short
    - year: unsigned short
    - month: unsigned short    
   pk: [runnum,lsnum]

RUNINFO:          #per run
   columns:       
    - datatagid: long long
    - runnum: unsigned int
    - hltkey: string    
    - gt_rs_key: string
   pk: [datatagid,runnum]

TRGCONFIG:        #per run
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - gt_rs_key: string
    - algomask_high: unsigned long long
    - algomask_low: unsigned long long
    - techmask: unsigned long long
   pk: [datatagid,runnum]

BEAMINFO_&suffix:         #per ls
   columns:
    - datatagid: long long
    - fillnum: unsigned int
    - runnum: unsigned int
    - lsnum: unsigned int
    - amodetagid: unsigned short
    - beamstatusid: unsigned short
    - egev: float
    - targetegev: unsigned short
    - ncollidingbx: unsigned short
    - intensity1: float
    - intensity2: float
   pk: [datatagid,runnum,lsnum]

BXBEAMINFO_&suffix:  #per ls, per bx
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - lsnum: unsigned int
    - bxidx: unsigned short
    - bxintensity1: float
    - bxintensity2: float
    - bxconfig1: bool
    - bxconfig2: bool
   pk: [datatagid,runnum,lsnum,bxidx]

TRG_&suffix:               #per ls, per trg bit
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - cmslsnum: unsigned int
    - trgbitid: unsigned short
    - trgbitnameid: unsigned short
    - isalgo: bool
    - prescidx: unsigned short
    - prescval: unsigned int  
    - counts: unsigned int
   pk: [datatagid,runnum,cmslsnum,trgbitnameid]
   
HLT_&suffix:  #per ls, per hltpath
   columns:
    - datatagid: long long
    - hltpathid: unsigned int
    - runnum: unsigned int
    - cmslsnum: unsigned int
    - prescidx: unsigned short
    - prescval: unsigned int
    - l1pass: unsigned int
    - hltaccept: unsigned int
   pk: [datatagid,runnum,cmslsnum,hltpathid]

TIMESOURCE_&suffix:       #per ls
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - lsnum: unsigned int
    - deadtimefrac: float
    - norbls: unsigned int
    - cmson: bool 
   pk: [datatagid,runnum,lsnum] 

HFOCLUMI_&suffix:       #per ls, per bx
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - lsnum: unsigned int
    - bxidx: unsigned short
    - instlumi: float
   pk: [datatagid,runnum,lsnum,bxidx]

HFETLUMI_&suffix:       #per ls, per bx
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - lsnum: unsigned int
    - bxidx: unsigned short
    - instlumi: float
   pk: [datatagid,runnum,lsnum,bxidx]

BCM1FLUMI_&suffix:       #per ls, per bx
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - lsnum: unsigned int
    - bxidx: unsigned short
    - instlumi: float
   pk: [datatagid,runnum,lsnum,bxidx]

PLTLUMI_&suffix:          #per ls, per bx
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - lsnum: unsigned int
    - bxidx: unsigned short
    - instlumi: float
   pk: [datatagid,runnum,lsnum,bxidx]

PIXELLUMI_&suffix:        #per ls, per bx
   columns:
    - datatagid: long long
    - runnum: unsigned int
    - cmslsnum: unsigned int
    - bxidx: unsigned short
    - instlumi: float
   pk: [datatagid,runnum,cmslsnum,bxidx]



